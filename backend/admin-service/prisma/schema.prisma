generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "mongodb"
  url      = env("MONGO_URI")
}

enum UserRole {
  CLIENT
  ADMIN
  ROOT
  ENTERPRISE
}

model User {
  id String @id @map("_id") @default(auto()) @db.ObjectId
  v Int @map("__v") @default(0)
  username String @unique
  password String
  email String @unique
  image String @default("https://static.productionready.io/images/smiley-cyrus.jpg")
  followingGroups String[] @db.ObjectId
  followingUsers String[] @db.ObjectId
  followers Int @default(0)
  isActive Boolean @default(true)
  role UserRole

  comments Comment[] @relation("CommentAuthor")
  @@map("users")
}

enum CategoryStatus {
  PENDING
  ACCEPTED
  REJECTED
}

model Category {
  id String @id @map("_id") @default(auto()) @db.ObjectId
  title String
  slug String @unique
  images String[]
  concerts String[] @db.ObjectId
  isActive Boolean @default(true)
  status CategoryStatus @default(PENDING)

  @@map("categories")
}

model Comment {
  id String @id @map("_id") @default(auto()) @db.ObjectId
  createdAt DateTime @default(now()) @db.Date
  updatedAt DateTime @updatedAt
  comment String
  authorId String @db.ObjectId 
  author User @relation("CommentAuthor", fields: [authorId], references: [id])
  likes String[] @db.ObjectId

  @@map("comments")
}

enum MusicGroupStatus {
  PENDING
  ACCEPTED
  REJECTED
}

model MusicGroup {
  id String @id @map("_id") @default(auto()) @db.ObjectId
  title String
  slug String @unique
  description String @default("")
  image String @default("https://static.productionready.io/images/smiley-cyrus.jpg")
  followers Int @default(0)
  status MusicGroupStatus @default(PENDING)
  isActive Boolean @default(true)


  @@map("musicgroups")
}


type ConcertLocation {
  type String
  coordinates Float[]
}

type ConcertTickets {
  sold Int @default(0)
  available Int @default(0)
  price Int
  location String
}

enum ConcertStatus {
  PENDING
  ACCEPTED
  REJECTED
}

model Concert {
  id String @id @map("_id") @default(auto()) @db.ObjectId
  title String
  slug String @unique
  dateStart DateTime @db.Date
  dateEnd DateTime @db.Date
  description String
  images String[]
  mapImg String?
  thumbnailImg String?
  locationName String
  location ConcertLocation
  totalTicketsSold Int @default(0)
  tickets ConcertTickets[]
  groups String[] @db.ObjectId
  categoroies String[] @db.ObjectId
  comments String[] @db.ObjectId
  isActive Boolean @default(true)
  status ConcertStatus @default(PENDING)

  @@map("concerts")
}
