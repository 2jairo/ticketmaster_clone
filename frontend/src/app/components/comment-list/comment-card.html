<div class="card">
  <a routerLink="/user/profile/{{ comment.author.username }}">
    <app-user-avatar [avatar]="comment.author.image" width="50px" height="50px"/>
  </a>

  <div class="desc">
    <div class="head">
      <a routerLink="/user/profile/{{ comment.author.username }}">
        <h3>{{ comment.author.username }}</h3>
      </a>

      @if(comment.author.following) {
        <div class="follow">
          <i class="fa-solid fa-heart gray"></i>
          <p>Following</p>
        </div>
      }

      @if(comment.owner) {
        <details #settings class="settings dropdown">
          <summary>
            <i class="fa-solid fa-gear"></i>
          </summary>

          <div class="content">
            <div (click)="settingsDeleteComment()">
              <i class="fa-solid fa-trash"></i>
              <p>Delete</p>
            </div>
          </div>
        </details>
      }
    </div>

    <p class="gray comment">{{ comment.comment }}</p>

    <div class="likes">
      <div (click)="toggleCommentLike()">
        @if(comment.liked) {
          <i class="fa-solid fa-thumbs-up"></i>
        } @else {
          <i class="fa-regular fa-thumbs-up"></i>
        }
      </div>

      <p class="gray">{{ comment.createdAt }}</p>
    </div>
  </div>
</div>


<style>
  .card {
    background-color: var(--pico-form-element-background-color);
    padding: 20px;
    border-radius: var(--pico-border-radius);
    border: var(--pico-border-width) solid var(--pico-secondary-border);
    display: flex;
    gap: 20px;
  }

  .desc {
    flex: 1;
  }

  .desc .head {
    display: flex;
    align-items: start;
    gap: 20px;

    h3 {
      font-size: larger;
      cursor: pointer;
    }

    .follow {
      display: flex;
      align-items: center;
      gap: 10px;
      border: var(--pico-border-width) solid var(--pico-secondary-border);
      border-radius: var(--pico-border-radius);
      padding: 5px;
    }
  }
  .desc .head .settings {
    flex: 1;
    cursor: pointer;
    display: flex;
    justify-content: end;

    summary {
      border: unset;
      padding: 0;
      height: fit-content;
    }
    summary:focus {
      box-shadow: unset;
      background-color: unset;
    }
    summary::after {
      all: unset;
    }

    .content {
      position: absolute;
      right: 2em;
      top: 0;
      background-color: var(--pico-background-color);
      border-radius: var(--pico-border-radius);
      border: var(--pico-border-width) solid var(--pico-secondary-border);
      z-index: 999;
      overflow: hidden;
      user-select: none;
    }
    .content > div {
      padding: 10px 20px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .content > div:hover {
      background-color: var(--pico-form-element-background-color);
    }
    .content > div:not(:last-child) {
      border-bottom: var(--pico-border-width) solid var(--pico-secondary-border);
    }
  }

  .gray {
    color: var(--pico-secondary-border)
  }

  .likes {
    display: flex;
    align-items: center;
    justify-content: space-between;
    cursor: pointer;
  }
</style>
